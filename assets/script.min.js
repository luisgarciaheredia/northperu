'use strict';var app={init:function(){this.set_url_base();this.set_defaults();this.set_dom();this.set_listeners()},set_url_base:function(){this.urlBase="www.northperurentacar.com.pe"===window.location.hostname?"https://www.northperurentacar.com.pe/reservation":"http://localhost/northperu"},set_defaults:function(){var a=window.M,c={opacity:.75},b=document.querySelectorAll(".modal");a.Modal.init(b,c);b=document.querySelectorAll("select");a.FormSelect.init(b,c);b=document.querySelectorAll(".tabs");this.Tabs=
a.Tabs.init(b,c);b=document.querySelectorAll(".carousel");a.Carousel.init(b,c);b=document.querySelectorAll(".datepicker");a.Datepicker.init(b,c);b=document.querySelectorAll(".timepicker");a.Timepicker.init(b,c)},set_dom:function(){this.dom={};this.dom.paso1_buttons=document.querySelectorAll("#paso1 a");this.dom.paso2_button=document.querySelectorAll("#paso2 a")[0];this.dom.paso3_button=document.querySelectorAll("#paso3 a")[0];this.dom.paso4_button=document.querySelectorAll("#paso4 a")[0]},set_listeners:function(){var a=
this;a.dom.paso1_buttons.forEach(function(c){c.addEventListener("click",a.click_paso1_button.bind(a))});a.dom.paso2_button.addEventListener("click",a.click_paso2_button.bind(a));a.dom.paso3_button.addEventListener("click",a.click_paso3_button.bind(a));a.dom.paso4_button.addEventListener("click",a.click_paso4_button.bind(a))},click_paso1_button:function(a){this.model=a.target.getAttribute("data-model");this.Tabs[0].el.querySelectorAll("a")[1].parentNode.classList.remove("disabled");this.Tabs[0].select("paso2")},
click_paso2_button:function(){this.Tabs[0].el.querySelectorAll("a")[2].parentNode.classList.remove("disabled");this.Tabs[0].select("paso3")},click_paso3_button:function(){this.Tabs[0].el.querySelectorAll("a")[3].parentNode.classList.remove("disabled");this.Tabs[0].select("paso4")},click_paso4_button:function(){var a=this,c=a.urlBase+"/assets/save.php",b=a.model,d=document.querySelectorAll("#fecha_entrega")[0].value,e=document.querySelectorAll("#hora_entrega")[0].value,f=document.querySelectorAll("#ciudad_entrega")[0].value,
g=document.querySelectorAll("input[name\x3d'direccion_entrega']:checked").length?document.querySelectorAll("input[name\x3d'direccion_entrega']:checked")[0].value:"-",h=document.querySelectorAll("#fecha_devolucion")[0].value,k=document.querySelectorAll("#hora_devolucion")[0].value,l=document.querySelectorAll("#ciudad_devolucion")[0].value,m=document.querySelectorAll("input[name\x3d'direccion_devolucion']:checked").length?document.querySelectorAll("input[name\x3d'direccion_devolucion']:checked")[0].value:
"-",n=document.querySelectorAll("#name")[0].value,p=document.querySelectorAll("#phone")[0].value,q=document.querySelectorAll("#email")[0].value,r=document.querySelectorAll("#silla_bebe")[0].checked?"Si":"No",t=document.querySelectorAll("#parrilla_equipaje")[0].checked?"Si":"No",u=document.querySelectorAll("#servicio_chofer")[0].checked?"Si":"No",v=document.querySelectorAll("#celular_adicional")[0].checked?"Si":"No",w=document.querySelectorAll("#navegador_gps")[0].checked?"Si":"No";a.sendRequest("vehiculo\x3d"+
b+"\x26fecha_entrega\x3d"+d+"\x26hora_entrega\x3d"+e+"\x26ciudad_entrega\x3d"+f+"\x26direccion_entrega\x3d"+g+"\x26fecha_devolucion\x3d"+h+"\x26hora_devolucion\x3d"+k+"\x26ciudad_devolucion\x3d"+l+"\x26direccion_devolucion\x3d"+m+"\x26name\x3d"+n+"\x26phone\x3d"+p+"\x26email\x3d"+q+"\x26silla_bebe\x3d"+r+"\x26parrilla_equipaje\x3d"+t+"\x26servicio_chofer\x3d"+u+"\x26celular_adicional\x3d"+v+"\x26navegador_gps\x3d"+w,"POST",c).then(function(b){"success"===b.result&&(alert("Reserva guardada exitosamente"),
document.querySelectorAll("form").forEach(function(a){a.reset()}),a.Tabs[0].el.querySelectorAll("a")[1].parentNode.classList.add("disabled"),a.Tabs[0].el.querySelectorAll("a")[2].parentNode.classList.add("disabled"),a.Tabs[0].el.querySelectorAll("a")[3].parentNode.classList.add("disabled"),a.Tabs[0].select("paso1"),document.querySelectorAll(".carousel")[0].click())},function(a){console.log(a)})},sendRequest:function(a,c,b){var d=new XMLHttpRequest;return new Promise(function(e,f){d.onreadystatechange=
function(){4===d.readyState&&(300<=d.status?f("Error, status code \x3d "+d.status):e(JSON.parse(d.response)))};d.open(c,b);d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");d.send(a)})}};document.addEventListener("DOMContentLoaded",function(){app.init()});